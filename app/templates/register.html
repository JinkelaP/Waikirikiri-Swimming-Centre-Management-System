{% extends "base.html" %}
{% block content %}
<div class="container w-50 m-auto mt-5">
    <div class="card">
        <div class="card-header">
            <h1 class="fs-5">Sign Up</h1>
        </div>
        <form method="POST" action="/register" id="edit-form" class="needs-validation" novalidate>
            <div class="card-body">
                <div class="row g-3">

                    <div class="col-sm-6">
                        <label for="userName" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Username"
                            pattern="^[a-zA-Z0-9]*$" maxlength="20" required>
                        <div class="invalid-feedback">
                            Invalid. Alphabets and numbers only. max 20 characters.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="userPassword" name="userPassword"
                            placeholder="Password" pattern="^(?=.*[A-Z])(?=.*[a-zA-Z0-9-]).{8,}$" maxlength="30" required>
                        <div class="invalid-feedback">
                            Alphabets and numbers only. Must have one capitalised
                            character. Minimum 8 characters.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="userEmail" name="userEmail"
                            placeholder="email@example.co.nz" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
                            maxlength="40" required>
                        <div class="invalid-feedback">
                            Invalid email.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="title" class="form-label" >Title</label>
                        <select class="form-select col-sm-6" name="title" aria-label="selectTitle"required>
                            <option value="" selected disabled>Please select</option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Miss">Miss</option>
                            <option value="Ms">Ms</option>
                            <option value="Dr">Dr</option>
                        </select>
                        <div class="invalid-feedback">
                            Invalid.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="position" class="form-label">Occupation</label>
                        <input type="text" class="form-control" id="position" name="position" placeholder="Position"
                            pattern="[a-zA-Z]+" maxlength="20" required>
                        <div class="invalid-feedback">
                            Invalid. Alphabets only. max 20 characters.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="firstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="firstName" name="firstName" placeholder="First name"
                            pattern="[a-zA-Z]+" maxlength="20" required>
                        <div class="invalid-feedback">
                            Invalid. Alphabets only. max 20 characters.
                        </div>
                    </div>


                    <div class="col-sm-6">
                        <label for="lastName" class="form-label">Last name</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Last name"
                            pattern="[a-zA-Z]+" maxlength="20" required>
                        <div class="invalid-feedback">
                            Invalid. Alphabets only. max 20 characters.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phoneNumber" name="phoneNumber"
                            placeholder="Phone Number" pattern="^[0-9]+$" maxlength="12" required>
                        <div class="invalid-feedback">
                            Invalid. Numbers Only.
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="date" class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" id="dateedit" name="dateedit" placeholder="" required min="1923-01-01" max="2013-12-31" title="Only individuals over 10 years old can register.">
                        <div class="invalid-feedback">
                            Please enter a valid date between 1923 and 2013.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="userAddress" class="form-label">Address</label>
                        <input type="text" class="form-control" id="userAddress" name="userAddress"
                            placeholder="Address" maxlength="100" required>
                        <div class="invalid-feedback">
                            Invalid.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="healthInfo" class="form-label">Health Information</label>
                        <input type="text" class="form-control" id="healthInfo" name="healthInfo" placeholder="Health Information"
                            maxlength="100" >
                        <div class="invalid-feedback">
                            Invalid.
                        </div>
                    </div>

                    {% if msg %}
                    <div class="alert alert-danger text-center" role="alert">
                        {{ msg }}
                    </div>
                    {% endif %}



                </div>
            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-primary">Sign Up!</button>
            </div>
        </form>
    </div>
</div>

</form>


<script>
    (() => {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
    })()
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    let today = new Date();
    let maxDate = new Date(today.getFullYear() - 10, today.getMonth(), today.getDate());
    let formattedDate = maxDate.toISOString().split('T')[0];
    document.getElementById('dateedit').max = formattedDate;
});
</script>


</div>
</div>
</div>
</div>
{% endblock %}